---
title: 重置博客
date: 2020-02-27 11:41:54
tags: 杂项
---



更换硬盘后原有hexo本地文件丢失，重置博客后的小结。

<!--more-->



[参考博客](https://blog.csdn.net/ZWX2445205419/article/details/66970640?utm_source=blogxgwz5)

1. 文中存在问题：`clone`后`init`，会报错非空文件夹不能执行，可`init`后将`clone`到的文件存入；`clone`默认克隆主分支，`git branch -a`查看，可看到本地只有master（main）分支，远程有master和hexo分支，使用`git checkout --track remotes/origin/hexo`拉取远程hexo分支并切换，可以在文件夹中看到hexo分支下的文件，复制进hexo目录下 [参考](https://blog.csdn.net/baidu_38027860/article/details/83303602)

	1. `git branch`查看本地分支，`git branch -a`查看本地和远程所有分支
	2. `git checkout --track xxx`可以切换至远程分支，否则只能切换至本地分支

2. github仓库应配置两个branch：master用于存放blog页面内容；hexo分支用于存放hexo（本地）内容

3. `hexo d`后会自动部署到master分支；hexo分支需手动`git add . -f`、 `git commit`、 `git push origin hexo`~~、`git push origin_coding hexo`。因为有两个remote，一个github、一个coding，所以push要在origin和origin_coding各做一次。~~
  1. `.git/config`中，`[remote "origin"]`添加以下两句，即可一次 push，两个上传
  	1. `pushurl = git@github.com:gaylong9/gaylong9.github.io.git`
  	2. `pushurl = git@e.coding.net:gaylong9/gaylong9.git`

4. 后续换机、或异地管理，只需clone仓库即可

5. 文中提到异地管理时，需将`.deploy_git`删除，否则部署时会将博客部署到master分支，因为此次只是重建，并未涉及到博客复原（异地管理），故未尝试，存疑（两个分支不就是为了部署到master，备份到hexo吗）

6. 图片问题：要使用`npm install https://github.com/CodeFalling/hexo-asset-image --save`命令安装hexo-asset-image插件，否则版本号不对，图片显示有些问题 [参考博客](https://blog.csdn.net/Strong997/article/details/97767929)

7. 换行：`<br/>`

8. 目录：安装`hexo-toc`，在`_config.yaml`中添加`toc: maxDepth: 5`，文章中添加 `<!-- t_o_c -->` ，没有下划线，**注意空格**

9. 本地库与远程库的链接：
  1. 本地已有项目内`git init`，即会创建.git文件夹，将当前文件夹建为本地仓库。
  2. `git remote add origin address` 将远程库以origin命名，添加至链接的远程库
  3. `git pull origin master` 先pull，合并文件
  4. 随后add、commit后`git push --set-upstream origin master`，初次push，设置推送流。

10. `scaffolds/post`是博客文章模板

11. `hexo new <title>` `hexo g` `hexo s` `hexo d`

12. Md中，代码块不能直接放在`1.`这种序号后，引起hexo编译错误

13. 公式：使用mathjax，但`hexo-renderer-markdown-it-plus`自带Katex，二者同时开启时，会渲染并显示两份 [参考1 Katex的使用](https://blog.csdn.net/u014792304/article/details/78687859)  [参考2 hexo&latex&mathjax](https://blog.csdn.net/yexiaohhjk/article/details/82526604)  [参考3 Mathjax问题小总结](https://adaning.github.io/posts/33457.html)；当前使用mathjax，[设置方法](https://blog.csdn.net/weixin_44191286/article/details/102702479)，其中js源老旧，改用`https://cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML`，[参考](https://blog.csdn.net/lzs781/article/details/105592503/)

	