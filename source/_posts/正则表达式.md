---
title: 正则表达式
mathjax: true
date: 2020-11-11 22:45:15
tags:
---

<br/>

<!-- more -->

<!-- toc -->

<br/>



[toc]



# 正则表达式

检查一个串是否含有某种子串

[菜鸟正则表达式在线测试](http://c.runoob.com/front-end/854)

[菜鸟正则表达式语法](https://www.runoob.com/regexp/regexp-syntax.html)

&nbsp;

## 1. 普通字符

如正则`123`，则可在**123**4**123**匹配到两处

&nbsp;

## 2. 非打印字符

| 字符 | 说明                                                         |
| :--- | :----------------------------------------------------------- |
| \cx  | 匹配由x指明的控制字符。例如，\cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。 |
| \f   | 匹配一个换页符。等价于 \x0c 和 \cL。                         |
| \n   | 匹配一个换行符。等价于 \x0a 和 \cJ。                         |
| \r   | 匹配一个回车符。等价于 \x0d 和 \cM。                         |
| \s   | 匹配任何空白字符，包括空格、制表符、换页符等等。等价于`[\f\n\r\t\v]`。注意 Unicode 正则表达式会匹配全角空格符。 |
| \S   | 匹配任何非空白字符。等价于`[^\f\n\r\t\v]`                    |
| \t   | 匹配一个制表符。等价于 \x09 和 \cI。                         |
| \v   | 匹配一个垂直制表符。等价于 \x0b 和 \cK。                     |

&nbsp;

## 3. 特殊字符

| 字符 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| $    | 匹配输入字符串的结尾位置。如果设置了RegExp对象的Multiline属性，则\$也匹配`\n` 或`\r`。要匹配\$字符本身，使用`\$`。 |
| ( )  | 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，使用`\(` 和`\)`。 |
| *    | 匹配前面的子表达式零次或多次。要匹配 * 字符，使用`\*`。      |
| +    | 匹配前面的子表达式一次或多次。要匹配 + 字符，使用`\+`。      |
| .    | 匹配除换行符`\n`之外的任何单字符。要匹配.，使用`\. `。       |
| [    | 标记一个中括号表达式的开始。要匹配 [，使用`\[`。             |
| ?    | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，使用`\?`。 |
| \    | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。 `\\` 匹配 `\`。 |
| ^    | 匹配输入字符串的开始位置，除非在方括号表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合。要匹配 ^ 字符本身，使用`\^`。 |
| {    | 标记限定符表达式的开始。要匹配 {，使用`\{`。                 |
| \|   | 指明两项之间的一个选择。要匹配 \|，使用`\|`。                |
| \w   | 匹配字母、数字、下划线。等价于 [A-Za-z0-9_]                  |

&nbsp;

### 3.1 一些需要说明的特殊字符

1. `[]`：字符簇，用于**匹配单个字符**，若单个字符属于方括号内的字符集合，则匹配成功
	1. `[^123]` 表示匹配除123外的字符
	2. `[a-z]` 区间
2. `()`：用于匹配多个字符（或称为子串），内部格式和无括号一样。
3. 贪婪限定符：`*` 和 `+` 限定符都是贪婪的，会尽可能多地匹配文字，只有在它们的后面加上一个 ? 就可以实现非贪婪或最小匹配。如`<.*?>`就可以在`<h1> title </h1>`中仅匹配到`<h1>`而非整句了。

&nbsp;

## 4. 限定符

用于指定某些字符/组件出现次数的符号

| 符号  | 说明                                                         |
| ----- | ------------------------------------------------------------ |
| *     | 匹配前面的子表达式零次或多次。例如，zo* 能匹配 "z" 以及 "zoo"。* 等价于{0,}。 |
| +     | 匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 "zo" 以及 "zoo"，但不能匹配 "z"。+ 等价于 {1,}。 |
| ?     | 匹配前面的子表达式零次或一次。例如，"do(es)?" 可以匹配 "do" 、 "does" 中的 "does" 、 "doxy" 中的 "do" 。? 等价于 {0,1}。 |
| {n}   | n 是一个非负整数。匹配确定的n次。例如，'o{2}' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o。 |
| {n,}  | n 是一个非负整数。至少匹配n次。例如，'o{2,}' 不能匹配 "Bob" 中的 'o'，但能匹配 "foooood" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。 |
| {n,m} | m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，"o{1,3}" 将匹配 "fooooood" 中的前三个 o。'o{0,1}' 等价于 'o?'。**注意在逗号和两个数之间不能有空格。** |

&nbsp;

## 5. 定位符

描述字符串或单词的边界，`^` 和 `$` 分别指字符串的开始与结束，`\b` 描述单词的前或后边界，`\B` 表示非单词边界。

| 字符 | 描述                                                         |
| :--- | :----------------------------------------------------------- |
| ^    | 匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。 |
| $    | 匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。 |
| \b   | 匹配一个单词边界，即字与空格间的位置。                       |
| \B   | 非单词边界匹配。                                             |

不能将限定符与定位符一起使用。由于在紧靠换行或者单词边界的前面或后面不能有一个以上位置，因此不允许诸如`^*` 之类的表达式。

&nbsp;

## 6. 选择

1. `()`表示捕获分组，会导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式，可用`\num`查看/调用。如`(.)\1`匹配两个连续的相同字符。
2. eg：`\b([a-z]+) \1\b\i` 表示搜索相邻两单词，在`Is is the cost of of gasoline going up up `中可搜索到三组结果。

### 6.1 非捕获元

`()`会导致匹配项缓存，可用非捕获元消除此副作用。

1. `?:`：放在第一个选项前，单纯消除缓存
2. `?=`：正向预查，在任何开始匹配圆括号内的正则表达式模式的位置来匹配搜索字符串。
	1. `exp1(?=exp2)`，搜索exp2前的exp1。如`hi(?=[\d+])`即为搜索数字前的hi，在`hi123hi`中仅能搜索到前一个hi
	2. `(?<=exp2)exp1`查找exp2后面的exp1。
3. `?!`：负向预查，在任何开始不匹配该正则表达式模式的位置来匹配搜索字符串。
	1. `exp1(?!exp2)`：查找后面不是exp2的exp1。
	2. `(?<!exp2)exp1`：查找前面不是exp2的exp1。

&nbsp;

## 7. 修饰符/标记

用于指定额外的匹配策略。标记位于表达式之外。格式`/pattern/flags`。

| 修饰符 | 含义                                                         |
| ------ | ------------------------------------------------------------ |
| i      | ignore 不区分大小写                                          |
| g      | global 全局匹配，否则只匹配第一个结果                        |
| m      | multi line 多行匹配，使边界字符`^`和`$`匹配每一行的开头和结尾 |
| s      | 特殊字符圆点`.`中包含换行符\n，默认`.`匹配除换行符外的所有字符 |

&nbsp;

## 8. 优先级

下表从最高到最低说明了各种正则表达式运算符的优先级顺序：

| 运算符                      | 描述                           |
| :-------------------------- | :----------------------------- |
| \                           | 转义符                         |
| (), (?:), (?=), []          | 圆括号和方括号                 |
| *, +, ?, {n}, {n,}, {n,m}   | 限定符                         |
| ^, $, \任何元字符、任何字符 | 定位点和序列（即：位置和顺序） |
| \|                          | 替换，"或"操作                 |